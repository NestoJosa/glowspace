{"ast":null,"code":"var _jsxFileName = \"/Users/nestos/Desktop/Code/glowspace/src/components/Search/SearchResults/SearchResultsContainer.js\";\n// SearchResultsContainer.s\n// previously known as ProcessSearchResults.js\nimport React from \"react\";\nimport SearchResults from './SearchResults'; // Import Helper Component\n\nimport FormatDate from './Utils/FormatDate';\n\nconst SearchResultsContainer = props => {\n  let output;\n  let searchResults;\n\n  if (props.unProcessedData) {\n    // deep copy the object\n    searchResults = JSON.parse(JSON.stringify(props.unProcessedData)); // add the treatment that each saloon offers,\n    // to each saloon object\n\n    addTheTreatmentsOffered(searchResults); // add a count and next date to each treatment\n\n    addCountAndNextToEachTreatment(searchResults); // shorten the title and description, if they are more than \n    // 100 or 200 chars respectively\n\n    shortenTitleAndDescription(searchResults);\n    output = searchResults;\n  }\n\n  ;\n\n  if (props.clientCoordinates && output) {\n    addDistanceToSaloon(props.clientCoordinates, output);\n  }\n\n  return /*#__PURE__*/React.createElement(SearchResults, {\n    processedSearchResults: output,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  });\n};\n\nexport default SearchResultsContainer;\n/* \n\n  HELPER FUNCTIONS\n  ******************************************************************************************************************************************************************************************************************************************************************************************************\n\n*/\n\nconst addTheTreatmentsOffered = array => {\n  let newArray = array; // Loop through all of the saloons\n\n  for (let i = 0; i < newArray.length; i++) {\n    const saloon = newArray[i]; // Initiate an empty array\n    // that will be used to store the treatment\n    // that each saloon offers\n\n    let saloonTreatments = []; // Loop through each saloons array of timeslots\n\n    for (let y = 0; y < saloon.timeslots.length; y++) {\n      // the timeslot is an array of objects\n      let timeslot = saloon.timeslots[y]; // Loop through the array of treatments, that is housed in each timeslot\n\n      for (let z = 0; z < timeslot.treatments.length; z++) {\n        const treatment = timeslot.treatments[z]; // check if the current looped through treatment's name is \n        // already in the saloonTreatments array\n\n        let isIncluded = saloonTreatments.some(element => element.name === treatment.name); // if it is NOT already included\n\n        if (!isIncluded) {\n          // then push it to the saloonTreatments array\n          saloonTreatments.push(treatment);\n        }\n\n        ;\n      }\n\n      ;\n    }\n\n    ; // add the new array of offered treatments to the saloon objects\n\n    saloon.treatmentsOffered = saloonTreatments; // reset the saloonTreatments array before initializing a new loop\n\n    saloonTreatments = [];\n  }\n\n  ;\n  return newArray;\n};\n\nconst addCountAndNextToEachTreatment = array => {\n  let manipulatedArray = array; // Loop through the saloons \n\n  for (let i = 0; i < manipulatedArray.length; i++) {\n    const saloon = manipulatedArray[i]; // Run an inner loop on the saloons treatmentsOffered array\n    // so we basically take the treatments offered list and start another loop\n\n    for (let j = 0; j < saloon.treatmentsOffered.length; j++) {\n      const treatmentOffered = saloon.treatmentsOffered[j]; // give the treatments offered object a new prop that will be\n      // incremented for everytime we find a matching treatment in each timeslot\n\n      treatmentOffered.count = null;\n      treatmentOffered.next = null; // Run another inner loop on the saloons timeslots array\n      // The timeslots array contains an array of timeslot objects\n      // that all have a treatment prop that has an array of \n      // available treatments offered in that timeslot\n\n      for (let k = 0; k < saloon.timeslots.length; k++) {\n        const timeslot = saloon.timeslots[k]; // if the current timeslots treatment array contains the current treatmentOffered\n\n        let isIncluded = timeslot.treatments.some(element => element.name === treatmentOffered.name); // then add one to treatmentOffered.count\n\n        if (isIncluded) {\n          treatmentOffered.count++;\n        }\n\n        ; // add the next available timeslot if not already set\n\n        if (treatmentOffered.next === null) {\n          // here we could call a format date function that takes the date string\n          // and converts it into our desired format: Onsdag d. 15 April kl 10:00\n          treatmentOffered.next = /*#__PURE__*/React.createElement(FormatDate, {\n            dateString: timeslot.start,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 35\n            }\n          });\n        }\n      }\n\n      ;\n    }\n\n    ;\n  }\n\n  ;\n};\n\nconst addDistanceToSaloon = (clientCoordinates, arrayOfSaloonObjects) => {\n  let lat1 = clientCoordinates.clientLatitude;\n  let lon1 = clientCoordinates.clientLongitude; // loop through the array of saloon objects\n\n  for (let i = 0; i < arrayOfSaloonObjects.length; i++) {\n    const currentSaloon = arrayOfSaloonObjects[i];\n    let lat2 = currentSaloon.latitude;\n    let lon2 = currentSaloon.longitude;\n    currentSaloon.distance = getDistance(lat1, lon1, lat2, lon2);\n  }\n\n  ;\n};\n\nconst getDistance = (lat1, lon1, lat2, lon2) => {\n  // return a zero if the two sets of coordinates are the same\n  if (lat1 === lat2 && lon1 === lon2) {\n    return 0;\n  } // magic:\n  else {\n      var radlat1 = Math.PI * lat1 / 180;\n      var radlat2 = Math.PI * lat2 / 180;\n      var theta = lon1 - lon2;\n      var radtheta = Math.PI * theta / 180;\n      var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n\n      if (dist > 1) {\n        dist = 1;\n      }\n\n      dist = Math.acos(dist);\n      dist = dist * 180 / Math.PI;\n      dist = dist * 60 * 1.1515;\n      dist = dist * 1.609344; //km\n\n      dist = Math.round(dist * 10) / 10;\n      return dist;\n    }\n\n  ;\n};\n\nconst shortenTitleAndDescription = saloonArray => {\n  // Run an outer loop on the saloons\n  for (let i = 0; i < saloonArray.length; i++) {\n    const saloon = saloonArray[i]; // Run an inner loop on the treatments that each saloon offers\n\n    for (let j = 0; j < saloon.treatmentsOffered.length; j++) {\n      const treatment = saloon.treatmentsOffered[j];\n\n      if (treatment.name.length > 100) {\n        treatment.name = shortenString(treatment.name, 100);\n      }\n\n      ;\n\n      if (treatment.description.length > 250) {\n        treatment.description = shortenString(treatment.description, 250);\n      }\n\n      ;\n    }\n\n    ;\n  }\n\n  ;\n};\n\nconst shortenString = (string, desiredLength) => {\n  return string.slice(0, desiredLength) + \"[...]\";\n};","map":{"version":3,"sources":["/Users/nestos/Desktop/Code/glowspace/src/components/Search/SearchResults/SearchResultsContainer.js"],"names":["React","SearchResults","FormatDate","SearchResultsContainer","props","output","searchResults","unProcessedData","JSON","parse","stringify","addTheTreatmentsOffered","addCountAndNextToEachTreatment","shortenTitleAndDescription","clientCoordinates","addDistanceToSaloon","array","newArray","i","length","saloon","saloonTreatments","y","timeslots","timeslot","z","treatments","treatment","isIncluded","some","element","name","push","treatmentsOffered","manipulatedArray","j","treatmentOffered","count","next","k","start","arrayOfSaloonObjects","lat1","clientLatitude","lon1","clientLongitude","currentSaloon","lat2","latitude","lon2","longitude","distance","getDistance","radlat1","Math","PI","radlat2","theta","radtheta","dist","sin","cos","acos","round","saloonArray","shortenString","description","string","desiredLength","slice"],"mappings":"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","sourcesContent":["// SearchResultsContainer.s\n\n// previously known as ProcessSearchResults.js\n\nimport React from \"react\";\n\nimport SearchResults from './SearchResults';\n\n// Import Helper Component\nimport FormatDate from './Utils/FormatDate';\n\nconst SearchResultsContainer = props => {\n  \n  let output;\n  let searchResults;\n\n  if (props.unProcessedData) {\n\n    // deep copy the object\n    searchResults = JSON.parse(JSON.stringify(props.unProcessedData))\n\n    // add the treatment that each saloon offers,\n    // to each saloon object\n    addTheTreatmentsOffered(searchResults)\n\n    // add a count and next date to each treatment\n    addCountAndNextToEachTreatment(searchResults)\n\n    // shorten the title and description, if they are more than \n    // 100 or 200 chars respectively\n    shortenTitleAndDescription(searchResults);\n\n    output = searchResults;\n  };\n\n  if (props.clientCoordinates && output) {\n    addDistanceToSaloon(props.clientCoordinates, output);\n  }\n\n  return(\n    <SearchResults \n      processedSearchResults={output}\n    />\n  );\n};\n\n\nexport default SearchResultsContainer;\n\n\n/* \n\n  HELPER FUNCTIONS\n  ******************************************************************************************************************************************************************************************************************************************************************************************************\n\n*/\n\nconst addTheTreatmentsOffered = (array) => {\n  let newArray = array;\n\n  // Loop through all of the saloons\n  for (let i = 0; i < newArray.length; i++) {\n    const saloon = newArray[i];\n\n    // Initiate an empty array\n    // that will be used to store the treatment\n    // that each saloon offers\n    let saloonTreatments = [];\n\n    // Loop through each saloons array of timeslots\n    for (let y = 0; y < saloon.timeslots.length; y++) {\n\n      // the timeslot is an array of objects\n      let timeslot = saloon.timeslots[y];\n\n      // Loop through the array of treatments, that is housed in each timeslot\n      for (let z = 0; z < timeslot.treatments.length; z++) {\n        const treatment = timeslot.treatments[z];\n\n        // check if the current looped through treatment's name is \n        // already in the saloonTreatments array\n        let isIncluded = saloonTreatments.some( element => element.name === treatment.name);\n\n        // if it is NOT already included\n        if (!isIncluded) {\n          // then push it to the saloonTreatments array\n          saloonTreatments.push(treatment)    \n        };\n      };\n    };\n\n    // add the new array of offered treatments to the saloon objects\n    saloon.treatmentsOffered = saloonTreatments;\n\n    // reset the saloonTreatments array before initializing a new loop\n    saloonTreatments = [];\n  };\n\n  return newArray;\n};\n\nconst addCountAndNextToEachTreatment = (array) => {\n  let manipulatedArray = array;\n\n  // Loop through the saloons \n  for (let i = 0; i < manipulatedArray.length; i++) {\n    const saloon = manipulatedArray[i];\n\n    // Run an inner loop on the saloons treatmentsOffered array\n    // so we basically take the treatments offered list and start another loop\n    for (let j = 0; j < saloon.treatmentsOffered.length; j++) {\n      const treatmentOffered = saloon.treatmentsOffered[j];\n      // give the treatments offered object a new prop that will be\n      // incremented for everytime we find a matching treatment in each timeslot\n      treatmentOffered.count = null\n      treatmentOffered.next = null\n\n      // Run another inner loop on the saloons timeslots array\n      // The timeslots array contains an array of timeslot objects\n      // that all have a treatment prop that has an array of \n      // available treatments offered in that timeslot\n      for (let k = 0; k < saloon.timeslots.length; k++) {\n        const timeslot = saloon.timeslots[k];\n\n        // if the current timeslots treatment array contains the current treatmentOffered\n        let isIncluded = timeslot.treatments.some( element => element.name === treatmentOffered.name);\n  \n        // then add one to treatmentOffered.count\n        if (isIncluded) {\n          treatmentOffered.count++;\n        };\n\n        // add the next available timeslot if not already set\n        if (treatmentOffered.next === null) {\n          // here we could call a format date function that takes the date string\n          // and converts it into our desired format: Onsdag d. 15 April kl 10:00\n          treatmentOffered.next = <FormatDate dateString={timeslot.start} />\n        }\n      };\n    };\n  };\n};\n\nconst addDistanceToSaloon = (clientCoordinates, arrayOfSaloonObjects) => {\n\n  let lat1 = clientCoordinates.clientLatitude;\n  \n  let lon1 = clientCoordinates.clientLongitude;\n\n  // loop through the array of saloon objects\n  for (let i = 0; i < arrayOfSaloonObjects.length; i++) {\n    const currentSaloon = arrayOfSaloonObjects[i];\n\n    let lat2 = currentSaloon.latitude;\n    \n    let lon2 = currentSaloon.longitude;\n\n    currentSaloon.distance = getDistance(lat1, lon1, lat2, lon2);\n  };\n};\n\nconst getDistance = (lat1, lon1, lat2, lon2) => {\n  // return a zero if the two sets of coordinates are the same\n  if ((lat1 === lat2) && (lon1 === lon2)) {\n    return 0;\n  }\n  // magic:\n  else {\n    var radlat1 = Math.PI * lat1 / 180;\n    var radlat2 = Math.PI * lat2 / 180;\n    var theta = lon1 - lon2;\n    var radtheta = Math.PI * theta / 180;\n    var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n    if (dist > 1) {\n      dist = 1;\n    }\n    dist = Math.acos(dist);\n    dist = dist * 180 / Math.PI;\n    dist = dist * 60 * 1.1515;\n    dist = dist * 1.609344; //km\n    \n    dist = Math.round(dist * 10) / 10\n\n    return dist;\n  };\n};\n\nconst shortenTitleAndDescription = saloonArray => {\n  // Run an outer loop on the saloons\n  for (let i = 0; i < saloonArray.length; i++) {\n    const saloon = saloonArray[i];\n\n    // Run an inner loop on the treatments that each saloon offers\n    for (let j = 0; j < saloon.treatmentsOffered.length; j++) {\n      const treatment = saloon.treatmentsOffered[j];\n      \n      if (treatment.name.length > 100) {\n        treatment.name = shortenString(treatment.name, 100);\n      };\n\n      if (treatment.description.length > 250) {\n        treatment.description = shortenString(treatment.description, 250);\n      };\n    }; \n  };\n};\n\nconst shortenString = (string, desiredLength) => {\n  return string.slice(0, desiredLength) + \"[...]\";  \n};\n"]},"metadata":{},"sourceType":"module"}