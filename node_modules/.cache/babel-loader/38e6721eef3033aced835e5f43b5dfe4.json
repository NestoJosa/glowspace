{"ast":null,"code":"var _jsxFileName = \"/Users/nestos/Desktop/Code/glowspace/src/components/Search/SearchResults/SearchResultsContainer.js\";\n// SearchResultsContainer.s\n// This container component is responsible for\n// processing the raw search results\n\n/* \n\n  WIP:\n\n  Currently:\n  - this component is calling some helper functions from a utils folder,\n  and some other from the bottom of the file\n\n  Expected:\n  - all of the helper componets should be calles from a seperate utisl folder\n\n*/\nimport React from \"react\";\nimport SearchResults from './SearchResults'; // Import Utils\n\nimport { addTheTreatmentsOffered, addCountAndNextToEachTreatment } from './Utils/SearchResultsUtils';\n\nconst SearchResultsContainer = props => {\n  let output;\n  let searchResults;\n\n  if (props.rawResults) {\n    // deep copy the object\n    searchResults = JSON.parse(JSON.stringify(props.rawResults)); // add the treatment that each saloon offers,\n    // to each saloon object\n\n    addTheTreatmentsOffered(searchResults); // add a count and next date to each treatment\n\n    addCountAndNextToEachTreatment(searchResults); // shorten the title and description, if they are more than \n    // 100 or 200 chars respectively\n\n    shortenTitleAndDescription(searchResults);\n    output = searchResults;\n  }\n\n  ;\n\n  if (props.clientCoordinates && output) {\n    addDistanceToSaloon(props.clientCoordinates, output);\n  }\n\n  return /*#__PURE__*/React.createElement(SearchResults, {\n    processedSearchResults: output,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  });\n};\n\nexport default SearchResultsContainer;\n/* \n\n  HELPER FUNCTIONS\n\n*/\n\nconst addDistanceToSaloon = (clientCoordinates, arrayOfSaloonObjects) => {\n  let lat1 = clientCoordinates.clientLatitude;\n  let lon1 = clientCoordinates.clientLongitude; // loop through the array of saloon objects\n\n  for (let i = 0; i < arrayOfSaloonObjects.length; i++) {\n    const currentSaloon = arrayOfSaloonObjects[i];\n    let lat2 = currentSaloon.latitude;\n    let lon2 = currentSaloon.longitude;\n    currentSaloon.distance = getDistance(lat1, lon1, lat2, lon2);\n  }\n\n  ;\n};\n\nconst getDistance = (lat1, lon1, lat2, lon2) => {\n  // return a zero if the two sets of coordinates are the same\n  if (lat1 === lat2 && lon1 === lon2) {\n    return 0;\n  } // magic:\n  else {\n      var radlat1 = Math.PI * lat1 / 180;\n      var radlat2 = Math.PI * lat2 / 180;\n      var theta = lon1 - lon2;\n      var radtheta = Math.PI * theta / 180;\n      var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n\n      if (dist > 1) {\n        dist = 1;\n      }\n\n      dist = Math.acos(dist);\n      dist = dist * 180 / Math.PI;\n      dist = dist * 60 * 1.1515;\n      dist = dist * 1.609344; //km\n\n      dist = Math.round(dist * 10) / 10;\n      return dist;\n    }\n\n  ;\n};\n\nconst shortenTitleAndDescription = saloonArray => {\n  // Run an outer loop on the saloons\n  for (let i = 0; i < saloonArray.length; i++) {\n    const saloon = saloonArray[i]; // Run an inner loop on the treatments that each saloon offers\n\n    for (let j = 0; j < saloon.treatmentsOffered.length; j++) {\n      const treatment = saloon.treatmentsOffered[j];\n\n      if (treatment.name.length > 100) {\n        treatment.name = shortenString(treatment.name, 100);\n      }\n\n      ;\n\n      if (treatment.description.length > 250) {\n        treatment.description = shortenString(treatment.description, 250);\n      }\n\n      ;\n    }\n\n    ;\n  }\n\n  ;\n};\n\nconst shortenString = (string, desiredLength) => {\n  return string.slice(0, desiredLength) + \"[...]\";\n};","map":{"version":3,"sources":["/Users/nestos/Desktop/Code/glowspace/src/components/Search/SearchResults/SearchResultsContainer.js"],"names":["React","SearchResults","addTheTreatmentsOffered","addCountAndNextToEachTreatment","SearchResultsContainer","props","output","searchResults","rawResults","JSON","parse","stringify","shortenTitleAndDescription","clientCoordinates","addDistanceToSaloon","arrayOfSaloonObjects","lat1","clientLatitude","lon1","clientLongitude","i","length","currentSaloon","lat2","latitude","lon2","longitude","distance","getDistance","radlat1","Math","PI","radlat2","theta","radtheta","dist","sin","cos","acos","round","saloonArray","saloon","j","treatmentsOffered","treatment","name","shortenString","description","string","desiredLength","slice"],"mappings":";AAAA;AAEA;AACA;;AAEA;;;;;;;;;;;;AAaA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,aAAP,MAA0B,iBAA1B,C,CAEA;;AACA,SAAQC,uBAAR,EAAiCC,8BAAjC,QAAsE,4BAAtE;;AAEA,MAAMC,sBAAsB,GAAGC,KAAK,IAAI;AAEtC,MAAIC,MAAJ;AACA,MAAIC,aAAJ;;AAEA,MAAIF,KAAK,CAACG,UAAV,EAAsB;AAEpB;AACAD,IAAAA,aAAa,GAAGE,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeN,KAAK,CAACG,UAArB,CAAX,CAAhB,CAHoB,CAKpB;AACA;;AACAN,IAAAA,uBAAuB,CAACK,aAAD,CAAvB,CAPoB,CASpB;;AACAJ,IAAAA,8BAA8B,CAACI,aAAD,CAA9B,CAVoB,CAYpB;AACA;;AACAK,IAAAA,0BAA0B,CAACL,aAAD,CAA1B;AAEAD,IAAAA,MAAM,GAAGC,aAAT;AACD;;AAAA;;AAED,MAAIF,KAAK,CAACQ,iBAAN,IAA2BP,MAA/B,EAAuC;AACrCQ,IAAAA,mBAAmB,CAACT,KAAK,CAACQ,iBAAP,EAA0BP,MAA1B,CAAnB;AACD;;AAED,sBACE,oBAAC,aAAD;AACE,IAAA,sBAAsB,EAAEA,MAD1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF;AAKD,CAjCD;;AAoCA,eAAeF,sBAAf;AAGA;;;;;;AAQA,MAAMU,mBAAmB,GAAG,CAACD,iBAAD,EAAoBE,oBAApB,KAA6C;AAEvE,MAAIC,IAAI,GAAGH,iBAAiB,CAACI,cAA7B;AAEA,MAAIC,IAAI,GAAGL,iBAAiB,CAACM,eAA7B,CAJuE,CAMvE;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,oBAAoB,CAACM,MAAzC,EAAiDD,CAAC,EAAlD,EAAsD;AACpD,UAAME,aAAa,GAAGP,oBAAoB,CAACK,CAAD,CAA1C;AAEA,QAAIG,IAAI,GAAGD,aAAa,CAACE,QAAzB;AAEA,QAAIC,IAAI,GAAGH,aAAa,CAACI,SAAzB;AAEAJ,IAAAA,aAAa,CAACK,QAAd,GAAyBC,WAAW,CAACZ,IAAD,EAAOE,IAAP,EAAaK,IAAb,EAAmBE,IAAnB,CAApC;AACD;;AAAA;AACF,CAhBD;;AAkBA,MAAMG,WAAW,GAAG,CAACZ,IAAD,EAAOE,IAAP,EAAaK,IAAb,EAAmBE,IAAnB,KAA4B;AAC9C;AACA,MAAKT,IAAI,KAAKO,IAAV,IAAoBL,IAAI,KAAKO,IAAjC,EAAwC;AACtC,WAAO,CAAP;AACD,GAFD,CAGA;AAHA,OAIK;AACH,UAAII,OAAO,GAAGC,IAAI,CAACC,EAAL,GAAUf,IAAV,GAAiB,GAA/B;AACA,UAAIgB,OAAO,GAAGF,IAAI,CAACC,EAAL,GAAUR,IAAV,GAAiB,GAA/B;AACA,UAAIU,KAAK,GAAGf,IAAI,GAAGO,IAAnB;AACA,UAAIS,QAAQ,GAAGJ,IAAI,CAACC,EAAL,GAAUE,KAAV,GAAkB,GAAjC;AACA,UAAIE,IAAI,GAAGL,IAAI,CAACM,GAAL,CAASP,OAAT,IAAoBC,IAAI,CAACM,GAAL,CAASJ,OAAT,CAApB,GAAwCF,IAAI,CAACO,GAAL,CAASR,OAAT,IAAoBC,IAAI,CAACO,GAAL,CAASL,OAAT,CAApB,GAAwCF,IAAI,CAACO,GAAL,CAASH,QAAT,CAA3F;;AACA,UAAIC,IAAI,GAAG,CAAX,EAAc;AACZA,QAAAA,IAAI,GAAG,CAAP;AACD;;AACDA,MAAAA,IAAI,GAAGL,IAAI,CAACQ,IAAL,CAAUH,IAAV,CAAP;AACAA,MAAAA,IAAI,GAAGA,IAAI,GAAG,GAAP,GAAaL,IAAI,CAACC,EAAzB;AACAI,MAAAA,IAAI,GAAGA,IAAI,GAAG,EAAP,GAAY,MAAnB;AACAA,MAAAA,IAAI,GAAGA,IAAI,GAAG,QAAd,CAZG,CAYqB;;AAExBA,MAAAA,IAAI,GAAGL,IAAI,CAACS,KAAL,CAAWJ,IAAI,GAAG,EAAlB,IAAwB,EAA/B;AAEA,aAAOA,IAAP;AACD;;AAAA;AACF,CAxBD;;AA0BA,MAAMvB,0BAA0B,GAAG4B,WAAW,IAAI;AAChD;AACA,OAAK,IAAIpB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoB,WAAW,CAACnB,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;AAC3C,UAAMqB,MAAM,GAAGD,WAAW,CAACpB,CAAD,CAA1B,CAD2C,CAG3C;;AACA,SAAK,IAAIsB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,MAAM,CAACE,iBAAP,CAAyBtB,MAA7C,EAAqDqB,CAAC,EAAtD,EAA0D;AACxD,YAAME,SAAS,GAAGH,MAAM,CAACE,iBAAP,CAAyBD,CAAzB,CAAlB;;AAEA,UAAIE,SAAS,CAACC,IAAV,CAAexB,MAAf,GAAwB,GAA5B,EAAiC;AAC/BuB,QAAAA,SAAS,CAACC,IAAV,GAAiBC,aAAa,CAACF,SAAS,CAACC,IAAX,EAAiB,GAAjB,CAA9B;AACD;;AAAA;;AAED,UAAID,SAAS,CAACG,WAAV,CAAsB1B,MAAtB,GAA+B,GAAnC,EAAwC;AACtCuB,QAAAA,SAAS,CAACG,WAAV,GAAwBD,aAAa,CAACF,SAAS,CAACG,WAAX,EAAwB,GAAxB,CAArC;AACD;;AAAA;AACF;;AAAA;AACF;;AAAA;AACF,CAlBD;;AAoBA,MAAMD,aAAa,GAAG,CAACE,MAAD,EAASC,aAAT,KAA2B;AAC/C,SAAOD,MAAM,CAACE,KAAP,CAAa,CAAb,EAAgBD,aAAhB,IAAiC,OAAxC;AACD,CAFD","sourcesContent":["// SearchResultsContainer.s\n\n// This container component is responsible for\n// processing the raw search results\n\n/* \n\n  WIP:\n\n  Currently:\n  - this component is calling some helper functions from a utils folder,\n  and some other from the bottom of the file\n\n  Expected:\n  - all of the helper componets should be calles from a seperate utisl folder\n\n*/\n\nimport React from \"react\";\n\nimport SearchResults from './SearchResults';\n\n// Import Utils\nimport {addTheTreatmentsOffered, addCountAndNextToEachTreatment} from './Utils/SearchResultsUtils';\n\nconst SearchResultsContainer = props => {\n  \n  let output;\n  let searchResults;\n\n  if (props.rawResults) {\n\n    // deep copy the object\n    searchResults = JSON.parse(JSON.stringify(props.rawResults))\n\n    // add the treatment that each saloon offers,\n    // to each saloon object\n    addTheTreatmentsOffered(searchResults)\n\n    // add a count and next date to each treatment\n    addCountAndNextToEachTreatment(searchResults)\n\n    // shorten the title and description, if they are more than \n    // 100 or 200 chars respectively\n    shortenTitleAndDescription(searchResults);\n\n    output = searchResults;\n  };\n\n  if (props.clientCoordinates && output) {\n    addDistanceToSaloon(props.clientCoordinates, output);\n  }\n\n  return(\n    <SearchResults \n      processedSearchResults={output}\n    />\n  );\n};\n\n\nexport default SearchResultsContainer;\n\n\n/* \n\n  HELPER FUNCTIONS\n\n*/\n\n\n\nconst addDistanceToSaloon = (clientCoordinates, arrayOfSaloonObjects) => {\n\n  let lat1 = clientCoordinates.clientLatitude;\n  \n  let lon1 = clientCoordinates.clientLongitude;\n\n  // loop through the array of saloon objects\n  for (let i = 0; i < arrayOfSaloonObjects.length; i++) {\n    const currentSaloon = arrayOfSaloonObjects[i];\n\n    let lat2 = currentSaloon.latitude;\n    \n    let lon2 = currentSaloon.longitude;\n\n    currentSaloon.distance = getDistance(lat1, lon1, lat2, lon2);\n  };\n};\n\nconst getDistance = (lat1, lon1, lat2, lon2) => {\n  // return a zero if the two sets of coordinates are the same\n  if ((lat1 === lat2) && (lon1 === lon2)) {\n    return 0;\n  }\n  // magic:\n  else {\n    var radlat1 = Math.PI * lat1 / 180;\n    var radlat2 = Math.PI * lat2 / 180;\n    var theta = lon1 - lon2;\n    var radtheta = Math.PI * theta / 180;\n    var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n    if (dist > 1) {\n      dist = 1;\n    }\n    dist = Math.acos(dist);\n    dist = dist * 180 / Math.PI;\n    dist = dist * 60 * 1.1515;\n    dist = dist * 1.609344; //km\n    \n    dist = Math.round(dist * 10) / 10\n\n    return dist;\n  };\n};\n\nconst shortenTitleAndDescription = saloonArray => {\n  // Run an outer loop on the saloons\n  for (let i = 0; i < saloonArray.length; i++) {\n    const saloon = saloonArray[i];\n\n    // Run an inner loop on the treatments that each saloon offers\n    for (let j = 0; j < saloon.treatmentsOffered.length; j++) {\n      const treatment = saloon.treatmentsOffered[j];\n      \n      if (treatment.name.length > 100) {\n        treatment.name = shortenString(treatment.name, 100);\n      };\n\n      if (treatment.description.length > 250) {\n        treatment.description = shortenString(treatment.description, 250);\n      };\n    }; \n  };\n};\n\nconst shortenString = (string, desiredLength) => {\n  return string.slice(0, desiredLength) + \"[...]\";  \n};\n"]},"metadata":{},"sourceType":"module"}