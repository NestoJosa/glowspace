{"ast":null,"code":"import _classCallCheck from\"/Users/nestos/Desktop/Code/glowspace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/nestos/Desktop/Code/glowspace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/nestos/Desktop/Code/glowspace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/nestos/Desktop/Code/glowspace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/nestos/Desktop/Code/glowspace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import GetSearchString from'./GetSearchString/GetSearchString';import Search from'./Search';var SearchContainer=/*#__PURE__*/function(_React$Component){_inherits(SearchContainer,_React$Component);var _super=_createSuper(SearchContainer);function SearchContainer(props){var _this;_classCallCheck(this,SearchContainer);_this=_super.call(this,props);_this.state={searchResults:null,lat:null,lon:null,isLoading:false};_this.getSearchResults=_this.getSearchResults.bind(_assertThisInitialized(_this));return _this;}_createClass(SearchContainer,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(navigator.geolocation){// the arrow-success-func is a required func for the \n// getCurrentPosition method and takes a position object only\nnavigator.geolocation.getCurrentPosition(function(position){_this2.setState({lat:position.coords.latitude,lon:position.coords.longitude});});};}},{key:\"getSearchResults\",value:function getSearchResults(searchParams){var _this3=this;// Create a formatted string for the api\nvar stringForApi=GetSearchString(searchParams);this.setState({searchResults:null,isLoading:true},function(){fetch(stringForApi).then(function(res){return res.json();}).then(function(data){// here we could process the data\n_this3.setState({searchResults:data,isLoading:false});})// Log any errors to the console\n.catch(function(err){_this3.setState({isLoading:false});console.log('Error Log:');console.log(err);});});}},{key:\"render\",value:function render(){var coordinates=this.state.lat===!null&&this.state.lon===!null?{'clientLatitude':this.state.lat,'clientLongitude':this.state.lon}:null;return/*#__PURE__*/React.createElement(Search,{getSearchResults:this.getSearchResults,rawSearchResults:this.state.searchResults,clientCoordinates:coordinates,isLoading:this.state.isLoading});}}]);return SearchContainer;}(React.Component);;export default SearchContainer;","map":{"version":3,"sources":["/Users/nestos/Desktop/Code/glowspace/src/components/Search/SearchContainer.js"],"names":["React","GetSearchString","Search","SearchContainer","props","state","searchResults","lat","lon","isLoading","getSearchResults","bind","navigator","geolocation","getCurrentPosition","position","setState","coords","latitude","longitude","searchParams","stringForApi","fetch","then","res","json","data","catch","err","console","log","coordinates","Component"],"mappings":"uwBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,eAAP,KAA4B,mCAA5B,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,C,GAGMC,CAAAA,e,8HACJ,yBAAYC,KAAZ,CAAmB,iDACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,aAAa,CAAE,IADJ,CAEXC,GAAG,CAAE,IAFM,CAGXC,GAAG,CAAE,IAHM,CAIXC,SAAS,CAAE,KAJA,CAAb,CAMA,MAAKC,gBAAL,CAAwB,MAAKA,gBAAL,CAAsBC,IAAtB,+BAAxB,CARiB,aASlB,C,yFAEmB,iBAClB,GAAIC,SAAS,CAACC,WAAd,CAA2B,CACzB;AACA;AACAD,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CAA0C,SAACC,QAAD,CAAc,CACtD,MAAI,CAACC,QAAL,CAAc,CACZT,GAAG,CAAEQ,QAAQ,CAACE,MAAT,CAAgBC,QADT,CAEZV,GAAG,CAAEO,QAAQ,CAACE,MAAT,CAAgBE,SAFT,CAAd,EAID,CALD,EAMD,EACF,C,0DAGgBC,Y,CAAc,iBAC7B;AACA,GAAIC,CAAAA,YAAY,CAAGpB,eAAe,CAACmB,YAAD,CAAlC,CAEA,KAAKJ,QAAL,CAAc,CACZV,aAAa,CAAE,IADH,CAEZG,SAAS,CAAE,IAFC,CAAd,CAGI,UAAM,CACRa,KAAK,CAACD,YAAD,CAAL,CACCE,IADD,CACM,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EADT,EAECF,IAFD,CAEM,SAACG,IAAD,CAAU,CACd;AACA,MAAI,CAACV,QAAL,CAAc,CACZV,aAAa,CAAEoB,IADH,CAEZjB,SAAS,CAAE,KAFC,CAAd,EAID,CARD,CASA;AATA,CAUCkB,KAVD,CAUQ,SAACC,GAAD,CAAS,CACf,MAAI,CAACZ,QAAL,CAAc,CAAEP,SAAS,CAAE,KAAb,CAAd,EACAoB,OAAO,CAACC,GAAR,CAAY,YAAZ,EACAD,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACD,CAdD,EAeD,CAnBD,EAoBD,C,uCAEQ,CACP,GAAIG,CAAAA,WAAW,CAAG,KAAK1B,KAAL,CAAWE,GAAX,GAAmB,CAAC,IAApB,EAA4B,KAAKF,KAAL,CAAWG,GAAX,GAAmB,CAAC,IAAhD,CACd,CAAE,iBAAkB,KAAKH,KAAL,CAAWE,GAA/B,CAAoC,kBAAmB,KAAKF,KAAL,CAAWG,GAAlE,CADc,CAEd,IAFJ,CAKA,mBACE,oBAAC,MAAD,EACE,gBAAgB,CAAE,KAAKE,gBADzB,CAEE,gBAAgB,CAAE,KAAKL,KAAL,CAAWC,aAF/B,CAGE,iBAAiB,CAAEyB,WAHrB,CAIE,SAAS,CAAE,KAAK1B,KAAL,CAAWI,SAJxB,EADF,CAQD,C,6BAlE2BT,KAAK,CAACgC,S,EAmEnC,CAED,cAAe7B,CAAAA,eAAf","sourcesContent":["import React from 'react';\nimport GetSearchString from './GetSearchString/GetSearchString';\nimport Search from './Search';\n\n\nclass SearchContainer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchResults: null,\n      lat: null,\n      lon: null,\n      isLoading: false,\n    };\n    this.getSearchResults = this.getSearchResults.bind(this);\n  };\n\n  componentDidMount() {\n    if (navigator.geolocation) {\n      // the arrow-success-func is a required func for the \n      // getCurrentPosition method and takes a position object only\n      navigator.geolocation.getCurrentPosition( (position) => {\n        this.setState({\n          lat: position.coords.latitude,\n          lon: position.coords.longitude,\n        });\n      });\n    };\n  };\n\n  \n  getSearchResults(searchParams) {\n    // Create a formatted string for the api\n    let stringForApi = GetSearchString(searchParams);\n    \n    this.setState({\n      searchResults: null,\n      isLoading: true}\n      , () => {\n      fetch(stringForApi)\n      .then(res => res.json())\n      .then((data) => {\n        // here we could process the data\n        this.setState({ \n          searchResults: data,\n          isLoading: false\n        });\n      })\n      // Log any errors to the console\n      .catch( (err) => {\n        this.setState({ isLoading: false })\n        console.log('Error Log:')\n        console.log(err)\n      });\n    })    \n  };\n\n  render() {\n    let coordinates = this.state.lat === !null && this.state.lon === !null \n      ? { 'clientLatitude': this.state.lat, 'clientLongitude': this.state.lon }\n      : null\n    ;\n\n    return(\n      <Search \n        getSearchResults={this.getSearchResults}\n        rawSearchResults={this.state.searchResults}\n        clientCoordinates={coordinates}\n        isLoading={this.state.isLoading}\n      />\n    );\n  };\n};\n\nexport default SearchContainer;\n"]},"metadata":{},"sourceType":"module"}